# 图解操作系统

## 一、硬件结构
### 1.1 CPU是如何执行程序的的？
代码写了这么多，你知道``a=1+2``这条代码是怎么被cpu执行的吗？

你知道32位和64位的区别吗？32位的操作系统可以运行在64位的电脑上吗？64位的操作系统可以运行在32位的电脑上吗？如果不行，原因是什么？

cpu看了那么多，我们知道cpu通常分为32位和64位，你知道64位相比32位cpu的优势在哪吗？64位cpu的计算性能一定比32位cpu高很多吗？

接下来我们将循序渐进、一层一层的攻破这些问题。

#### 图灵机的工作方式
要想知道程序执行的原理，我们可以先从```图灵机```说起，图灵的基本思想是**用机器来模拟人们用纸笔进行数学运算的过程**，而且还定义了计算机有哪些部分组成，程序又是如何执行的。

图灵机的基本组成如下：
- 有一条```纸带```,纸带是一个个连续的格子组成，每个格子可以写入字符，纸带就好比内存，而纸带上的格子的字符就好比内存中的数据或程序；
- 有一个```读写头```,读写头可以读取纸带上任意格子的字符，也可以把字符写入到纸带的格子;
- 读写头上有一些部件，比如存储单元、控制单元以及运算单元：
- 1. 存储单元用于存放数据
- 2. 控制单元用于识别字符是数据还是指令，以及控制程序的流程等；
- 3. 运算单元用于执行运算指令；

知道了图灵机的组成后，我们以简单数学运算```1+2```作为例子，来看看它是怎么执行这行代码的。
- 首先，用读写头把‘1’、‘2’、‘+’这三个字符分别写入纸带上的三个格子，然后读写头先停在``1``字符对应的格子上；
- 接着，读写头读入``1``到存储设备上，这个存储设备称为图灵机的状态；
- 然后读写头向右移动一个格，用同样的方式把``2``读入图灵机的状态，于是现在图灵机的状态中存储着两个连续的数字，1和2；
- 读写头再往右移动一个格，就会碰到``+``号，读写头读到+号后，将+号传输给``控制单元``，控制单元发现是一个+号而不是数字，所以没有存入到状态中，因为+号是运算符指令，作用是加和目前的状态，于是通知``运算单元``工作。运算单元收到要加和状态中的值的通知后，就会把状态中的1和2读入并计算，再将计算的结果3存放到状态中；
- 最后，运算单元将结果返回给控制单元，控制单元将结果传输给读写头，读写头向右移动，把结果3写入到纸带的格子中；

通过上面的图灵机计算``1+2``的过程，可以发现图灵机主要功能就是读取纸带格子中的内容，然后交给控制单元识别字符是数字还是运算符指令，如果是数字则存入到图灵机状态中，如果是运算符，则通知运算符单元读取状态中的数值进行计算，计算结果最终返回给读写头，读写头把结果写入到纸带的格子中。

事实上，图灵机